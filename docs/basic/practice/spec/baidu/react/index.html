<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="React 编码规范 #  1 版本限制
1.1 法律要求
2 文件组织
2.1 命名
2.2 模块化
3 命名规则
3.1 组件
3.2 属性
3.3 高阶组件
4 组件声明
4.1 组件
4.2 属性
4.3 生命周期
4.4 高阶组件
5 组件实现
5.1 更新机制
5.2 纯函数应用
6 JSX
6.1 标签
6.2 属性
6.2.1 层级
1 版本限制 #  1.1 法律要求 #  [强制] 使用 React &gt;=15.6.2版本 #  解释
在15.6.2以前的版本协议带有 Facebook Patents，依据法务风险，严禁使用。
2 文件组织 #  2.1 命名 #  [强制] 同一目录下不得拥有同名的.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="React 编码规范 #  1 版本限制
1.1 法律要求
2 文件组织
2.1 命名
2.2 模块化
3 命名规则
3.1 组件
3.2 属性
3.3 高阶组件
4 组件声明
4.1 组件
4.2 属性
4.3 生命周期
4.4 高阶组件
5 组件实现
5.1 更新机制
5.2 纯函数应用
6 JSX
6.1 标签
6.2 属性
6.2.1 层级
1 版本限制 #  1.1 法律要求 #  [强制] 使用 React &gt;=15.6.2版本 #  解释
在15.6.2以前的版本协议带有 Facebook Patents，依据法务风险，严禁使用。
2 文件组织 #  2.1 命名 #  [强制] 同一目录下不得拥有同名的." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ikingye.github.io/study-javascript/docs/basic/practice/spec/baidu/react/" />
<meta property="article:modified_time" content="2020-08-04T23:47:37+08:00" />
<title>React | 叶王笔记</title>
<link rel="manifest" href="/study-javascript/manifest.json">
<link rel="icon" href="/study-javascript/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/study-javascript/book.min.a05275973bc10933f75e45cfddc943bf308da7e5ac2206875045620e6c605584.css" integrity="sha256-oFJ1lzvBCTP3XkXP3clDvzCNp&#43;WsIgaHUEViDmxgVYQ=">
<script defer src="/study-javascript/en.search.min.25047df628deabdf3f092d05b1927dde686932652d9cd24ea98e1c72294da81e.js" integrity="sha256-JQR99ijeq98/CS0FsZJ93mhpMmUtnNJOqY4ccilNqB4="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/study-javascript"><span>叶王笔记</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



<ul>
  <li><a href="https://kingye.me" target="_blank" rel="noopener noreferrer">博客</a></li>
  <li><a href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417021727.png" target="_blank" rel="noopener noreferrer">公众号</a></li>
  <li><a href="https://github.com/ikingye" target="_blank" rel="noopener noreferrer">Github</a></li>
  <li><a href="https://weibo.com/kingyip15215" target="_blank" rel="noopener noreferrer">微博</a></li>
  <li><a href="https://www.zhihu.com/people/wutongyip" target="_blank" rel="noopener noreferrer">知乎</a></li>
</ul>
<hr />








  



  
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <span>第一部分 基础入门</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/study-javascript/docs/basic/practice/" class="">实践</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/study-javascript/docs/basic/practice/spec/" class="collapsed ">编程规范</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/study-javascript/docs/basic/practice/spec/baidu/" class="">百度</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/study-javascript/docs/basic/practice/spec/baidu/" class="collapsed ">百度前端编程规范</a>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/study-javascript/docs/basic/practice/spec/baidu/css/" class="">Css</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/study-javascript/docs/basic/practice/spec/baidu/es-next/" class="">Es Next</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/study-javascript/docs/basic/practice/spec/baidu/html/" class="">Html</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/study-javascript/docs/basic/practice/spec/baidu/react/" class="active">React</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/study-javascript/docs/basic/practice/spec/baidu/typescript/" class="">Typescript</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/study-javascript/docs/basic/practice/spec/baidu/vue/" class="">Vue</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/study-javascript/docs/basic/practice/snippet/" class="collapsed ">代码片段</a>
  

          
  
  
  

  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <span>第二部分 设计</span>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <span>第三部分 源码实现</span>
  

          
  
  
  

  
  <ul>
    
  </ul>
  

        </li>
      
    
      
        <li>
          
  
    <span>第四部分 附录</span>
  

          
  
  
  

  
  <ul>
    
      
        <li>
          
  
    <a href="/study-javascript/docs/appendix/turorial/" class="">教程</a>
  

        </li>
      
    
      
        <li>
          
  
    <a href="/study-javascript/docs/appendix/interview/" class="collapsed ">4.2 面试题</a>
  

          
  
  
  

  

        </li>
      
    
      
        <li>
          
  
    <a href="/study-javascript/docs/appendix/attention/" class="">4.3 关注项目</a>
  

        </li>
      
    
  </ul>
  

        </li>
      
    
  </ul>
  














<hr />
<ul>
  <li><a href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417022040.png" target="_blank" rel="noopener noreferrer">微信</a></li>
  <li><a href="https://qm.qq.com/cgi-bin/qm/qr?k=EUhzg0UwUksxpQnwEmPngRLezlC6qrnn&jump_from=webapi" target="_blank" rel="noopener noreferrer"><img src="//pub.idqqimg.com/wpa/images/group.png"></a></li>
</ul>




</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/study-javascript/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>React</strong>

  <label for="toc-control">
    
    <img src="/study-javascript/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#1-版本限制">1 版本限制</a>
      <ul>
        <li><a href="#11-法律要求">1.1 法律要求</a>
          <ul>
            <li><a href="#强制-使用-react-1562版本">[强制] 使用 React <code>&gt;=15.6.2</code>版本</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#2-文件组织">2 文件组织</a>
      <ul>
        <li><a href="#21-命名">2.1 命名</a>
          <ul>
            <li><a href="#强制-同一目录下不得拥有同名的js和jsx文件">[强制] 同一目录下不得拥有同名的<code>.js</code>和<code>.jsx</code>文件。</a></li>
            <li><a href="#强制-组件文件使用一致的js或-jsx后缀">[强制] 组件文件使用一致的<code>.js</code>或 <code>.jsx</code>后缀。</a></li>
          </ul>
        </li>
        <li><a href="#22-模块化">2.2 模块化</a>
          <ul>
            <li><a href="#建议-实现单个组件的文件以export-default的形式暴露一个组件">[建议] 实现单个组件的文件以<code>export default</code>的形式暴露一个组件。</a></li>
            <li><a href="#建议-组织多个组件的目录使用一个indexjs以命名导出的形式暴露所有组件">[建议] 组织多个组件的目录使用一个<code>index.js</code>以命名导出的形式暴露所有组件。</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#3-命名规则">3 命名规则</a>
      <ul>
        <li><a href="#31-组件">3.1 组件</a>
          <ul>
            <li><a href="#强制-组件名为-pascalcase">[强制] 组件名为 PascalCase。</a></li>
            <li><a href="#强制-组件名称与文件名称保持相同">[强制] 组件名称与文件名称保持相同。</a></li>
          </ul>
        </li>
        <li><a href="#32-属性">3.2 属性</a>
          <ul>
            <li><a href="#强制-使用onxxx形式作为props中用于回调的属性名称">[强制] 使用<code>onXxx</code>形式作为<code>props</code>中用于回调的属性名称。</a></li>
            <li><a href="#建议-作为组件方法的事件处理函数以具备业务含义的词作为名称不使用onxxx形式命名">[建议] 作为组件方法的事件处理函数以具备业务含义的词作为名称，不使用<code>onXxx</code>形式命名。</a></li>
          </ul>
        </li>
        <li><a href="#33-高阶组件">3.3 高阶组件</a>
          <ul>
            <li><a href="#强制-高阶组件使用-camelcase-命名">[强制] 高阶组件使用 camelCase 命名。</a></li>
            <li><a href="#建议-使用withxxx或xxxable形式的词作为高阶组件的名称">[建议] 使用<code>withXxx</code>或<code>xxxable</code>形式的词作为高阶组件的名称。</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#4-组件声明">4 组件声明</a>
      <ul>
        <li><a href="#41-组件">4.1 组件</a>
          <ul>
            <li><a href="#强制-使用-es-class-声明组件禁止使用reactcreateclass">[强制] 使用 ES Class 声明组件，禁止使用<code>React.createClass</code>。</a></li>
            <li><a href="#强制-尽量使用无状态函数组件">[强制] 尽量使用无状态函数组件。</a></li>
            <li><a href="#建议-无需显式引入-react-对象">[建议] 无需显式引入 React 对象。</a></li>
            <li><a href="#建议-使用箭头函数声明函数组件">[建议] 使用箭头函数声明函数组件。</a></li>
          </ul>
        </li>
        <li><a href="#42-属性">4.2 属性</a>
          <ul>
            <li><a href="#强制-对于所有非isrequired的属性在defaultprops中声明对应的值">[强制] 对于所有非<code>isRequired</code>的属性，在<code>defaultProps</code>中声明对应的值。</a></li>
            <li><a href="#强制-如无必要使用属性语法声明propstypescontexttypesdefaultprops和state">[强制] 如无必要，使用属性语法声明<code>propsTypes</code>、<code>contextTypes</code>、<code>defaultProps</code>和<code>state</code>。</a></li>
          </ul>
        </li>
        <li><a href="#43-生命周期">4.3 生命周期</a>
          <ul>
            <li><a href="#强制-禁止使用componentwillmount">[强制] 禁止使用<code>componentWillMount</code>。</a></li>
            <li><a href="#强制-依照规定顺序编排组件中的方法和属性">[强制] 依照规定顺序编排组件中的方法和属性。</a></li>
          </ul>
        </li>
        <li><a href="#44-高阶组件">4.4 高阶组件</a>
          <ul>
            <li><a href="#建议-高阶组件返回新的组件类型时添加displayname属性">[建议] 高阶组件返回新的组件类型时，添加<code>displayName</code>属性。</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#5-组件实现">5 组件实现</a>
      <ul>
        <li><a href="#51-更新机制">5.1 更新机制</a>
          <ul>
            <li><a href="#强制-禁止为继承自purecomponent的组件编写shouldcomponentupdate实现">[强制] 禁止为继承自<code>PureComponent</code>的组件编写<code>shouldComponentUpdate</code>实现。</a></li>
          </ul>
        </li>
        <li><a href="#52-纯函数应用">5.2 纯函数应用</a>
          <ul>
            <li><a href="#强制-禁止在componentwillreceiveprops中包含除setstate外的副作用">[强制] 禁止在<code>componentWillReceiveProps</code>中包含除<code>setState</code>外的副作用。</a></li>
            <li><a href="#建议-除顶层或路由级组件以外所有组件均在概念上实现为纯组件pure-component">[建议] 除顶层或路由级组件以外，所有组件均在概念上实现为纯组件（Pure Component）。</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#6-jsx">6 JSX</a>
      <ul>
        <li><a href="#61-标签">6.1 标签</a>
          <ul>
            <li><a href="#强制-没有子节点的组件使用自闭合语法">[强制] 没有子节点的组件使用自闭合语法。</a></li>
            <li><a href="#强制-保持起始和结束标签在同一层缩进">[强制] 保持起始和结束标签在同一层缩进。</a></li>
            <li><a href="#强制-自闭合标签的前添加一个空格">[强制] 自闭合标签的<code>/&gt;</code>前添加一个空格。</a></li>
          </ul>
        </li>
        <li><a href="#62-属性">6.2 属性</a>
          <ul>
            <li><a href="#强制-对于多属性需要换行从第一个属性开始每个属性一行">[强制] 对于多属性需要换行，从第一个属性开始，每个属性一行。</a></li>
            <li><a href="#强制-以字符串字面量作为值的属性使用双引号在其它类型表达式中的字符串使用单引号">[强制] 以字符串字面量作为值的属性使用双引号（<code>&quot;</code>），在其它类型表达式中的字符串使用单引号（<code>'</code>）。</a></li>
            <li><a href="#强制-对于值为true的属性省去值部分">[强制] 对于值为<code>true</code>的属性，省去值部分。</a></li>
            <li><a href="#强制-值为true的属性放在其它属性前面">[强制] 值为<code>true</code>的属性放在其它属性前面。</a></li>
            <li><a href="#强制-对于需要使用key的场合提供一个唯一标识作为key属性的值禁止使用可能会变化的属性如索引">[强制] 对于需要使用<code>key</code>的场合，提供一个唯一标识作为<code>key</code>属性的值，禁止使用可能会变化的属性（如索引）。</a></li>
            <li><a href="#建议-避免在-jsx-的属性值中直接使用对象和函数表达式">[建议] 避免在 JSX 的属性值中直接使用对象和函数表达式。</a></li>
            <li><a href="#621-层级">6.2.1 层级</a></li>
            <li><a href="#建议-将-jsx-的层级控制在-5-层以内">[建议] 将 JSX 的层级控制在 5 层以内。</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="react-编码规范">
  React 编码规范
  <a class="anchor" href="#react-%e7%bc%96%e7%a0%81%e8%a7%84%e8%8c%83">#</a>
</h1>
<p><a href="#1">1 版本限制</a></p>
<p><a href="#1-1">1.1 法律要求</a></p>
<p><a href="#2">2 文件组织</a></p>
<p><a href="#2-1">2.1 命名</a></p>
<p><a href="#2-2">2.2 模块化</a></p>
<p><a href="#3">3 命名规则</a></p>
<p><a href="#3-1">3.1 组件</a></p>
<p><a href="#3-2">3.2 属性</a></p>
<p><a href="#3-3">3.3 高阶组件</a></p>
<p><a href="#4">4 组件声明</a></p>
<p><a href="#4-1">4.1 组件</a></p>
<p><a href="#4-2">4.2 属性</a></p>
<p><a href="#4-3">4.3 生命周期</a></p>
<p><a href="#4-4">4.4 高阶组件</a></p>
<p><a href="#5">5 组件实现</a></p>
<p><a href="#5-1">5.1 更新机制</a></p>
<p><a href="#5-2">5.2 纯函数应用</a></p>
<p><a href="#6-jsx">6 JSX</a></p>
<p><a href="#6-1">6.1 标签</a></p>
<p><a href="#6-2">6.2 属性</a></p>
<p><a href="#6-2-1">6.2.1 层级</a></p>
<h2 id="1-版本限制">
  1 版本限制
  <a class="anchor" href="#1-%e7%89%88%e6%9c%ac%e9%99%90%e5%88%b6">#</a>
</h2>
<h3 id="11-法律要求">
  1.1 法律要求
  <a class="anchor" href="#11-%e6%b3%95%e5%be%8b%e8%a6%81%e6%b1%82">#</a>
</h3>
<h4 id="强制-使用-react-1562版本">
  [强制] 使用 React <code>&gt;=15.6.2</code>版本
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e4%bd%bf%e7%94%a8-react-1562%e7%89%88%e6%9c%ac">#</a>
</h4>
<p>解释</p>
<p>在<code>15.6.2</code>以前的版本协议带有 Facebook Patents，依据法务风险，严禁使用。</p>
<h2 id="2-文件组织">
  2 文件组织
  <a class="anchor" href="#2-%e6%96%87%e4%bb%b6%e7%bb%84%e7%bb%87">#</a>
</h2>
<h3 id="21-命名">
  2.1 命名
  <a class="anchor" href="#21-%e5%91%bd%e5%90%8d">#</a>
</h3>
<h4 id="强制-同一目录下不得拥有同名的js和jsx文件">
  [强制] 同一目录下不得拥有同名的<code>.js</code>和<code>.jsx</code>文件。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e5%90%8c%e4%b8%80%e7%9b%ae%e5%bd%95%e4%b8%8b%e4%b8%8d%e5%be%97%e6%8b%a5%e6%9c%89%e5%90%8c%e5%90%8d%e7%9a%84js%e5%92%8cjsx%e6%96%87%e4%bb%b6">#</a>
</h4>
<p>解释：</p>
<p>在使用模块导入时，倾向于不添加后缀，如果存在同名但不同后缀的文件，构建工具将无法决定哪一个是需要引入的模块。</p>
<h4 id="强制-组件文件使用一致的js或-jsx后缀">
  [强制] 组件文件使用一致的<code>.js</code>或 <code>.jsx</code>后缀。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e7%bb%84%e4%bb%b6%e6%96%87%e4%bb%b6%e4%bd%bf%e7%94%a8%e4%b8%80%e8%87%b4%e7%9a%84js%e6%88%96-jsx%e5%90%8e%e7%bc%80">#</a>
</h4>
<p>解释：</p>
<p>所有组件文件的后缀名从<code>.js</code>或<code>.jsx</code>中任选其一。</p>
<p>不应在项目中出现部分组件为<code>.js</code>文件，部分为<code>.jsx</code>的情况。</p>
<h3 id="22-模块化">
  2.2 模块化
  <a class="anchor" href="#22-%e6%a8%a1%e5%9d%97%e5%8c%96">#</a>
</h3>
<h4 id="建议-实现单个组件的文件以export-default的形式暴露一个组件">
  [建议] 实现单个组件的文件以<code>export default</code>的形式暴露一个组件。
  <a class="anchor" href="#%e5%bb%ba%e8%ae%ae-%e5%ae%9e%e7%8e%b0%e5%8d%95%e4%b8%aa%e7%bb%84%e4%bb%b6%e7%9a%84%e6%96%87%e4%bb%b6%e4%bb%a5export-default%e7%9a%84%e5%bd%a2%e5%bc%8f%e6%9a%b4%e9%9c%b2%e4%b8%80%e4%b8%aa%e7%bb%84%e4%bb%b6">#</a>
</h4>
<p>解释：</p>
<p>允许一个文件中存在多个不同的组件，但仅允许通过<code>export default</code>暴露一个组件，其它组件均定义为内部组件。</p>
<h4 id="建议-组织多个组件的目录使用一个indexjs以命名导出的形式暴露所有组件">
  [建议] 组织多个组件的目录使用一个<code>index.js</code>以命名导出的形式暴露所有组件。
  <a class="anchor" href="#%e5%bb%ba%e8%ae%ae-%e7%bb%84%e7%bb%87%e5%a4%9a%e4%b8%aa%e7%bb%84%e4%bb%b6%e7%9a%84%e7%9b%ae%e5%bd%95%e4%bd%bf%e7%94%a8%e4%b8%80%e4%b8%aaindexjs%e4%bb%a5%e5%91%bd%e5%90%8d%e5%af%bc%e5%87%ba%e7%9a%84%e5%bd%a2%e5%bc%8f%e6%9a%b4%e9%9c%b2%e6%89%80%e6%9c%89%e7%bb%84%e4%bb%b6">#</a>
</h4>
<p>解释：</p>
<p>同目录内的组件相互引用使用<code>import Foo from './Foo';</code>进行。</p>
<p>引用其它目录的组件使用<code>import {Foo} from '../component';</code>进行。</p>
<p>建议使用<a href="https://marketplace.visualstudio.com/items?itemName=BrunoLM.export-index">VSCode 的 export-index 插件</a>等插件自动生成<code>index.js</code>的内容。</p>
<h2 id="3-命名规则">
  3 命名规则
  <a class="anchor" href="#3-%e5%91%bd%e5%90%8d%e8%a7%84%e5%88%99">#</a>
</h2>
<h3 id="31-组件">
  3.1 组件
  <a class="anchor" href="#31-%e7%bb%84%e4%bb%b6">#</a>
</h3>
<h4 id="强制-组件名为-pascalcase">
  [强制] 组件名为 PascalCase。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e7%bb%84%e4%bb%b6%e5%90%8d%e4%b8%ba-pascalcase">#</a>
</h4>
<p>包括函数组件，名称均为 PascalCase。</p>
<h4 id="强制-组件名称与文件名称保持相同">
  [强制] 组件名称与文件名称保持相同。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e7%bb%84%e4%bb%b6%e5%90%8d%e7%a7%b0%e4%b8%8e%e6%96%87%e4%bb%b6%e5%90%8d%e7%a7%b0%e4%bf%9d%e6%8c%81%e7%9b%b8%e5%90%8c">#</a>
</h4>
<p>同时组件名称应当能体现出组件的功能，以便通过观察文件名即确定使用哪一个组件。</p>
<h3 id="32-属性">
  3.2 属性
  <a class="anchor" href="#32-%e5%b1%9e%e6%80%a7">#</a>
</h3>
<h4 id="强制-使用onxxx形式作为props中用于回调的属性名称">
  [强制] 使用<code>onXxx</code>形式作为<code>props</code>中用于回调的属性名称。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e4%bd%bf%e7%94%a8onxxx%e5%bd%a2%e5%bc%8f%e4%bd%9c%e4%b8%baprops%e4%b8%ad%e7%94%a8%e4%ba%8e%e5%9b%9e%e8%b0%83%e7%9a%84%e5%b1%9e%e6%80%a7%e5%90%8d%e7%a7%b0">#</a>
</h4>
<p>解释：</p>
<p>使用统一的命名规则用以区分<code>props</code>中回调和非回调部分的属性，在 JSX 上可以清晰地看到一个组件向上和向下的逻辑交互。</p>
<p>对于不用于回调的函数类型的属性，使用动词作为属性名称。</p>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// onClick作为回调以on开头，renderText非回调函数则使用动词
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">Label</span> <span style="color:#f92672">=</span> ({ <span style="color:#a6e22e">onClick</span>, <span style="color:#a6e22e">renderText</span> }) =&gt; (
  <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">onClick</span>}<span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">renderText</span>()}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;</span>
);
</code></pre></div><h4 id="建议-作为组件方法的事件处理函数以具备业务含义的词作为名称不使用onxxx形式命名">
  [建议] 作为组件方法的事件处理函数以具备业务含义的词作为名称，不使用<code>onXxx</code>形式命名。
  <a class="anchor" href="#%e5%bb%ba%e8%ae%ae-%e4%bd%9c%e4%b8%ba%e7%bb%84%e4%bb%b6%e6%96%b9%e6%b3%95%e7%9a%84%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86%e5%87%bd%e6%95%b0%e4%bb%a5%e5%85%b7%e5%a4%87%e4%b8%9a%e5%8a%a1%e5%90%ab%e4%b9%89%e7%9a%84%e8%af%8d%e4%bd%9c%e4%b8%ba%e5%90%8d%e7%a7%b0%e4%b8%8d%e4%bd%bf%e7%94%a8onxxx%e5%bd%a2%e5%bc%8f%e5%91%bd%e5%90%8d">#</a>
</h4>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Form</span> {
  <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">bind</span>()
  <span style="color:#a6e22e">collectAndSubmitData</span>() {
    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> {
      <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">name</span>,
      <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">age</span>
    };
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">onSubmit</span>(<span style="color:#a6e22e">data</span>);
  }

  <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">bind</span>()
  <span style="color:#a6e22e">syncName</span>() {
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>  }

  <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">bind</span>()
  <span style="color:#a6e22e">syncAge</span>() {
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>  }

  <span style="color:#a6e22e">render</span>() {
    <span style="color:#66d9ef">return</span> (
      <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">label</span><span style="color:#f92672">&gt;</span>
          <span style="color:#a6e22e">姓名</span><span style="color:#960050;background-color:#1e0010">：</span>
          <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">onChange</span><span style="color:#f92672">=</span>{<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">syncName</span>} <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/label&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">label</span><span style="color:#f92672">&gt;</span>
          <span style="color:#a6e22e">年龄</span><span style="color:#960050;background-color:#1e0010">：</span>
          <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#a6e22e">onChange</span><span style="color:#f92672">=</span>{<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">syncAge</span>} <span style="color:#f92672">/&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/label&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">=</span>{<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">collectAndSubmit</span>}<span style="color:#f92672">&gt;</span>
          <span style="color:#a6e22e">提交</span>
        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/button&gt;</span>
      <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
    );
  }
}
</code></pre></div><h3 id="33-高阶组件">
  3.3 高阶组件
  <a class="anchor" href="#33-%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6">#</a>
</h3>
<h4 id="强制-高阶组件使用-camelcase-命名">
  [强制] 高阶组件使用 camelCase 命名。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e4%bd%bf%e7%94%a8-camelcase-%e5%91%bd%e5%90%8d">#</a>
</h4>
<p>解释：</p>
<p>高阶组件事实上并非一个组件，而是一个“生成组件类型”的函数，因此遵守 JavaScript 函数命名的规范，使用 camelCase 命名。</p>
<h4 id="建议-使用withxxx或xxxable形式的词作为高阶组件的名称">
  [建议] 使用<code>withXxx</code>或<code>xxxable</code>形式的词作为高阶组件的名称。
  <a class="anchor" href="#%e5%bb%ba%e8%ae%ae-%e4%bd%bf%e7%94%a8withxxx%e6%88%96xxxable%e5%bd%a2%e5%bc%8f%e7%9a%84%e8%af%8d%e4%bd%9c%e4%b8%ba%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e7%9a%84%e5%90%8d%e7%a7%b0">#</a>
</h4>
<p>解释：</p>
<p>高阶组件是为组件添加行为和功能的函数，因此使用如上形式的词有助于对其功能进行理解。</p>
<h2 id="4-组件声明">
  4 组件声明
  <a class="anchor" href="#4-%e7%bb%84%e4%bb%b6%e5%a3%b0%e6%98%8e">#</a>
</h2>
<h3 id="41-组件">
  4.1 组件
  <a class="anchor" href="#41-%e7%bb%84%e4%bb%b6">#</a>
</h3>
<h4 id="强制-使用-es-class-声明组件禁止使用reactcreateclass">
  [强制] 使用 ES Class 声明组件，禁止使用<code>React.createClass</code>。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e4%bd%bf%e7%94%a8-es-class-%e5%a3%b0%e6%98%8e%e7%bb%84%e4%bb%b6%e7%a6%81%e6%ad%a2%e4%bd%bf%e7%94%a8reactcreateclass">#</a>
</h4>
<p>解释：</p>
<p><a href="https://facebook.github.io/react/blog/2017/04/07/react-v15.5.0.html">React v15.5.0</a>已经弃用了<code>React.createClass</code>函数。</p>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bad
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">Message</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">React</span>.<span style="color:#a6e22e">createClass</span>({
  <span style="color:#a6e22e">render</span>() {
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span>{<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">message</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;;</span>
  }
});

<span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Message</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">PureComponent</span> {
  <span style="color:#a6e22e">render</span>() {
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span>{<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">state</span>.<span style="color:#a6e22e">message</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;;</span>
  }
}
</code></pre></div><h4 id="强制-尽量使用无状态函数组件">
  [强制] 尽量使用无状态函数组件。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e5%b0%bd%e9%87%8f%e4%bd%bf%e7%94%a8%e6%97%a0%e7%8a%b6%e6%80%81%e5%87%bd%e6%95%b0%e7%bb%84%e4%bb%b6">#</a>
</h4>
<p>解释：</p>
<p>函数组件在 React 中有着特殊的地位，在将来也有可能得到更多的内部优化。</p>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bad
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">NextNumber</span> {
  <span style="color:#a6e22e">render</span>() {
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span>{<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;;</span>
  }
}

<span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">NextNumber</span> <span style="color:#f92672">=</span> ({ <span style="color:#a6e22e">value</span> }) =&gt; <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">value</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;;</span>
</code></pre></div><h4 id="建议-无需显式引入-react-对象">
  [建议] 无需显式引入 React 对象。
  <a class="anchor" href="#%e5%bb%ba%e8%ae%ae-%e6%97%a0%e9%9c%80%e6%98%be%e5%bc%8f%e5%bc%95%e5%85%a5-react-%e5%af%b9%e8%b1%a1">#</a>
</h4>
<p>解释：</p>
<p>使用 JSX 隐式地依赖当前环境下有<code>React</code>这一对象，但在源码上并没有显式使用，这种情况下添加<code>import React from 'react';</code>会造成一个没有使用的变量存在。</p>
<p>使用<a href="https://www.npmjs.com/package/babel-plugin-react-require">babel-plugin-react-require</a>插件可以很好地解决这一问题，因此无需显式地编写<code>import React from 'react';</code>这一语句。</p>
<h4 id="建议-使用箭头函数声明函数组件">
  [建议] 使用箭头函数声明函数组件。
  <a class="anchor" href="#%e5%bb%ba%e8%ae%ae-%e4%bd%bf%e7%94%a8%e7%ae%ad%e5%a4%b4%e5%87%bd%e6%95%b0%e5%a3%b0%e6%98%8e%e5%87%bd%e6%95%b0%e7%bb%84%e4%bb%b6">#</a>
</h4>
<p>解释：</p>
<p>箭头函数具备更简洁的语法（无需<code>function</code>关键字），且可以在仅有一个语句时省去<code>return</code>造成的额外缩进。</p>
<h3 id="42-属性">
  4.2 属性
  <a class="anchor" href="#42-%e5%b1%9e%e6%80%a7">#</a>
</h3>
<h4 id="强制-对于所有非isrequired的属性在defaultprops中声明对应的值">
  [强制] 对于所有非<code>isRequired</code>的属性，在<code>defaultProps</code>中声明对应的值。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e5%af%b9%e4%ba%8e%e6%89%80%e6%9c%89%e9%9d%9eisrequired%e7%9a%84%e5%b1%9e%e6%80%a7%e5%9c%a8defaultprops%e4%b8%ad%e5%a3%b0%e6%98%8e%e5%af%b9%e5%ba%94%e7%9a%84%e5%80%bc">#</a>
</h4>
<p>解释：</p>
<p>声明初始值有助于对组件初始状态的理解，也可以减少<code>propTypes</code>对类型进行校验产生的开销。</p>
<p>对于初始没有值的属性，应当声明初始值为<code>null</code>而非<code>undefined</code>。</p>
<h4 id="强制-如无必要使用属性语法声明propstypescontexttypesdefaultprops和state">
  [强制] 如无必要，使用属性语法声明<code>propsTypes</code>、<code>contextTypes</code>、<code>defaultProps</code>和<code>state</code>。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e5%a6%82%e6%97%a0%e5%bf%85%e8%a6%81%e4%bd%bf%e7%94%a8%e5%b1%9e%e6%80%a7%e8%af%ad%e6%b3%95%e5%a3%b0%e6%98%8epropstypescontexttypesdefaultprops%e5%92%8cstate">#</a>
</h4>
<p>解释：</p>
<p>仅当初始<code>state</code>需要从<code>props</code>计算得到的时候，才将<code>state</code>的声明放在构造函数中，其它情况下均使用属性声明进行。</p>
<h3 id="43-生命周期">
  4.3 生命周期
  <a class="anchor" href="#43-%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f">#</a>
</h3>
<h4 id="强制-禁止使用componentwillmount">
  [强制] 禁止使用<code>componentWillMount</code>。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e7%a6%81%e6%ad%a2%e4%bd%bf%e7%94%a8componentwillmount">#</a>
</h4>
<p>解释：</p>
<p>使用<code>constructor</code>代替。</p>
<h4 id="强制-依照规定顺序编排组件中的方法和属性">
  [强制] 依照规定顺序编排组件中的方法和属性。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e4%be%9d%e7%85%a7%e8%a7%84%e5%ae%9a%e9%a1%ba%e5%ba%8f%e7%bc%96%e6%8e%92%e7%bb%84%e4%bb%b6%e4%b8%ad%e7%9a%84%e6%96%b9%e6%b3%95%e5%92%8c%e5%b1%9e%e6%80%a7">#</a>
</h4>
<p>按照以下顺序编排组件中的方法和属性：</p>
<ol>
<li><code>static displayName</code></li>
<li><code>static propTypes</code></li>
<li><code>state defaultProps</code></li>
<li>其它静态的属性</li>
<li><code>state</code></li>
<li>其它实例属性</li>
<li>用于事件处理并且以属性的方式（<code>onClick = e =&gt; {...}</code>）声明的方法</li>
<li><code>constructor</code></li>
<li><code>componentDidMount</code></li>
<li><code>shouldComponentUpdate</code></li>
<li><code>static getDerivedStateFromProps</code></li>
<li><code>componentDidUpdate</code></li>
<li><code>componentWillUnmount</code></li>
<li>事件处理方法</li>
<li>其它方法</li>
<li><code>render</code></li>
</ol>
<h3 id="44-高阶组件">
  4.4 高阶组件
  <a class="anchor" href="#44-%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6">#</a>
</h3>
<h4 id="建议-高阶组件返回新的组件类型时添加displayname属性">
  [建议] 高阶组件返回新的组件类型时，添加<code>displayName</code>属性。
  <a class="anchor" href="#%e5%bb%ba%e8%ae%ae-%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e8%bf%94%e5%9b%9e%e6%96%b0%e7%9a%84%e7%bb%84%e4%bb%b6%e7%b1%bb%e5%9e%8b%e6%97%b6%e6%b7%bb%e5%8a%a0displayname%e5%b1%9e%e6%80%a7">#</a>
</h4>
<p>同时在<code>displayName</code>上声明高阶组件的存在。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">asPureComponent</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Component</span> =&gt; {
    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">componentName</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Component</span>.<span style="color:#a6e22e">displayName</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">Component</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;UnknownComponent&#39;</span>;
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">class</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">PureComponent</span> {
        <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">displayName</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`asPure(</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">componentName</span><span style="color:#e6db74">}</span><span style="color:#e6db74">)`</span>

        <span style="color:#a6e22e">render</span>() {
            <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Component</span> {..<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">props</span>} <span style="color:#f92672">/&gt;</span>;
        }
    };
};
</code></pre></div><h2 id="5-组件实现">
  5 组件实现
  <a class="anchor" href="#5-%e7%bb%84%e4%bb%b6%e5%ae%9e%e7%8e%b0">#</a>
</h2>
<h3 id="51-更新机制">
  5.1 更新机制
  <a class="anchor" href="#51-%e6%9b%b4%e6%96%b0%e6%9c%ba%e5%88%b6">#</a>
</h3>
<h4 id="强制-禁止为继承自purecomponent的组件编写shouldcomponentupdate实现">
  [强制] 禁止为继承自<code>PureComponent</code>的组件编写<code>shouldComponentUpdate</code>实现。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e7%a6%81%e6%ad%a2%e4%b8%ba%e7%bb%a7%e6%89%bf%e8%87%aapurecomponent%e7%9a%84%e7%bb%84%e4%bb%b6%e7%bc%96%e5%86%99shouldcomponentupdate%e5%ae%9e%e7%8e%b0">#</a>
</h4>
<p>参考<a href="https://github.com/facebook/react/issues/9239">React 的相关 Issue</a>，在 React 的实现中，<code>PureComponent</code>并不直接实现<code>shouldComponentUpdate</code>，而是添加一个<code>isReactPureComponent</code>的标记，由<code>CompositeComponent</code>通过识别这个标记实现相关的逻辑。因此在<code>PureComponent</code>上自定义<code>shouldComponentUpdate</code>并无法享受<code>super.shouldComponentUpdate</code>的逻辑复用，也会使得这个继承关系失去意义。</p>
<h3 id="52-纯函数应用">
  5.2 纯函数应用
  <a class="anchor" href="#52-%e7%ba%af%e5%87%bd%e6%95%b0%e5%ba%94%e7%94%a8">#</a>
</h3>
<h4 id="强制-禁止在componentwillreceiveprops中包含除setstate外的副作用">
  [强制] 禁止在<code>componentWillReceiveProps</code>中包含除<code>setState</code>外的副作用。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e7%a6%81%e6%ad%a2%e5%9c%a8componentwillreceiveprops%e4%b8%ad%e5%8c%85%e5%90%ab%e9%99%a4setstate%e5%a4%96%e7%9a%84%e5%89%af%e4%bd%9c%e7%94%a8">#</a>
</h4>
<p>解释：</p>
<p><code>componentWillReceiveProps</code>应当且仅应当用于<code>props</code>和<code>state</code>的数据同步，不得用于获取远程数据、更新外部状态、执行回调函数等逻辑。</p>
<p>新版 React 使用<code>getDerivedStateFromProps</code>代替<code>componentWillReceiveProps</code>。</p>
<h4 id="建议-除顶层或路由级组件以外所有组件均在概念上实现为纯组件pure-component">
  [建议] 除顶层或路由级组件以外，所有组件均在概念上实现为纯组件（Pure Component）。
  <a class="anchor" href="#%e5%bb%ba%e8%ae%ae-%e9%99%a4%e9%a1%b6%e5%b1%82%e6%88%96%e8%b7%af%e7%94%b1%e7%ba%a7%e7%bb%84%e4%bb%b6%e4%bb%a5%e5%a4%96%e6%89%80%e6%9c%89%e7%bb%84%e4%bb%b6%e5%9d%87%e5%9c%a8%e6%a6%82%e5%bf%b5%e4%b8%8a%e5%ae%9e%e7%8e%b0%e4%b8%ba%e7%ba%af%e7%bb%84%e4%bb%b6pure-component">#</a>
</h4>
<p>本条规则并非要求组件继承自<code>PureComponent</code>，“概念上的纯组件”的意思为一个组件在<code>props</code>和<code>state</code>没有变化（shallowEqual）的情况下，渲染的结果应保持一致。</p>
<p>一个典型的非纯组件是使用了随机数或日期等函数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">RandomNumber</span> <span style="color:#f92672">=</span> () =&gt; <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span>{Math.<span style="color:#a6e22e">random</span>()}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;;</span>
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">Clock</span> <span style="color:#f92672">=</span> () =&gt; <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span>{Date.<span style="color:#a6e22e">time</span>()}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;;</span>
</code></pre></div><p>非纯组件具备向上的“传染性”，即一个包含非纯组件的组件也必须是非纯组件，依次沿组件树结构向上。由于非纯组件无法通过<code>shouldComponentUpdate</code>优化渲染性能且具备传染性，因此要避免在非顶层或路由组件中使用。</p>
<p>如果需要在组件树的某个节点使用随机数、日期等非纯的数据，应当由顶层组件生成这个值并通过<code>props</code>传递下来。对于使用 Redux 等应用状态管理的系统，可以在应用状态中存放相关值（如 Redux 使用 Action Creator 生成这些值并通过 Action 和 reducer 更新到 store 中）。</p>
<h2 id="6-jsx">
  6 JSX
  <a class="anchor" href="#6-jsx">#</a>
</h2>
<h3 id="61-标签">
  6.1 标签
  <a class="anchor" href="#61-%e6%a0%87%e7%ad%be">#</a>
</h3>
<h4 id="强制-没有子节点的组件使用自闭合语法">
  [强制] 没有子节点的组件使用自闭合语法。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e6%b2%a1%e6%9c%89%e5%ad%90%e8%8a%82%e7%82%b9%e7%9a%84%e7%bb%84%e4%bb%b6%e4%bd%bf%e7%94%a8%e8%87%aa%e9%97%ad%e5%90%88%e8%af%ad%e6%b3%95">#</a>
</h4>
<p>解释：</p>
<p>JSX 与 HTML 不同，所有元素均可以自闭合。</p>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bad
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span><span style="color:#f92672">&gt;&lt;</span><span style="color:#960050;background-color:#1e0010">/Foo&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span><span style="color:#f92672">&gt;&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>

<span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#f92672">/&gt;</span>
</code></pre></div><h4 id="强制-保持起始和结束标签在同一层缩进">
  [强制] 保持起始和结束标签在同一层缩进。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e4%bf%9d%e6%8c%81%e8%b5%b7%e5%a7%8b%e5%92%8c%e7%bb%93%e6%9d%9f%e6%a0%87%e7%ad%be%e5%9c%a8%e5%90%8c%e4%b8%80%e5%b1%82%e7%bc%a9%e8%bf%9b">#</a>
</h4>
<p>解释：</p>
<p>对于标签前面有其它语句（如<code>return</code>的情况，使用括号进行换行和缩进）。</p>
<p>对于直接<code>return</code>的函数组件，可以直接使用括号而省去大括号和<code>return</code>关键字：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">Message</span> <span style="color:#f92672">=</span> () =&gt; (
  <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">Hello</span> <span style="color:#a6e22e">World</span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;</span>
  <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
);
</code></pre></div><p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bad
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Message</span> {
    <span style="color:#a6e22e">render</span>() {
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">Hello</span> <span style="color:#a6e22e">World</span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;;</span>
    }
}

<span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Message</span> {
    <span style="color:#a6e22e">render</span>() {
        <span style="color:#66d9ef">return</span> (
            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span><span style="color:#f92672">&gt;</span>
                <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">Hello</span> <span style="color:#a6e22e">World</span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;</span>
            <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;;</span>
        );
    }
}
</code></pre></div><h4 id="强制-自闭合标签的前添加一个空格">
  [强制] 自闭合标签的<code>/&gt;</code>前添加一个空格。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e8%87%aa%e9%97%ad%e5%90%88%e6%a0%87%e7%ad%be%e7%9a%84%e5%89%8d%e6%b7%bb%e5%8a%a0%e4%b8%80%e4%b8%aa%e7%a9%ba%e6%a0%bc">#</a>
</h4>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bad
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">bar</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bar&#34;</span><span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">bar</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bar&#34;</span>  <span style="color:#f92672">/&gt;</span>

<span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">bar</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bar&#34;</span> <span style="color:#f92672">/&gt;</span>
</code></pre></div><h3 id="62-属性">
  6.2 属性
  <a class="anchor" href="#62-%e5%b1%9e%e6%80%a7">#</a>
</h3>
<h4 id="强制-对于多属性需要换行从第一个属性开始每个属性一行">
  [强制] 对于多属性需要换行，从第一个属性开始，每个属性一行。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e5%af%b9%e4%ba%8e%e5%a4%9a%e5%b1%9e%e6%80%a7%e9%9c%80%e8%a6%81%e6%8d%a2%e8%a1%8c%e4%bb%8e%e7%ac%ac%e4%b8%80%e4%b8%aa%e5%b1%9e%e6%80%a7%e5%bc%80%e5%a7%8b%e6%af%8f%e4%b8%aa%e5%b1%9e%e6%80%a7%e4%b8%80%e8%a1%8c">#</a>
</h4>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// 没有子节点
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">SomeComponent</span>
    <span style="color:#a6e22e">longProp</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">longProp</span>}
    <span style="color:#a6e22e">anotherLongProp</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">anotherLongProp</span>}
<span style="color:#960050;background-color:#1e0010">/&gt;</span>

<span style="color:#75715e">// 有子节点
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">SomeComponent</span>
    <span style="color:#a6e22e">longProp</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">longProp</span>}
    <span style="color:#a6e22e">anotherLongProp</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">anotherLongProp</span>}
<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">SomeChild</span> <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">SomeChild</span> <span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/SomeComponent&gt;</span>
</code></pre></div><h4 id="强制-以字符串字面量作为值的属性使用双引号在其它类型表达式中的字符串使用单引号">
  [强制] 以字符串字面量作为值的属性使用双引号（<code>&quot;</code>），在其它类型表达式中的字符串使用单引号（<code>'</code>）。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e4%bb%a5%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%ad%97%e9%9d%a2%e9%87%8f%e4%bd%9c%e4%b8%ba%e5%80%bc%e7%9a%84%e5%b1%9e%e6%80%a7%e4%bd%bf%e7%94%a8%e5%8f%8c%e5%bc%95%e5%8f%b7%e5%9c%a8%e5%85%b6%e5%ae%83%e7%b1%bb%e5%9e%8b%e8%a1%a8%e8%be%be%e5%bc%8f%e4%b8%ad%e7%9a%84%e5%ad%97%e7%ac%a6%e4%b8%b2%e4%bd%bf%e7%94%a8%e5%8d%95%e5%bc%95%e5%8f%b7">#</a>
</h4>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bad
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">bar</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bar&#39;</span> <span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span>{{<span style="color:#a6e22e">width</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;20px&#34;</span>}} <span style="color:#f92672">/&gt;</span>

<span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">bar</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bar&#34;</span> <span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span>{{<span style="color:#a6e22e">width</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;20px&#39;</span>}} <span style="color:#f92672">/&gt;</span>
</code></pre></div><h4 id="强制-对于值为true的属性省去值部分">
  [强制] 对于值为<code>true</code>的属性，省去值部分。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e5%af%b9%e4%ba%8e%e5%80%bc%e4%b8%batrue%e7%9a%84%e5%b1%9e%e6%80%a7%e7%9c%81%e5%8e%bb%e5%80%bc%e9%83%a8%e5%88%86">#</a>
</h4>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bad
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">visible</span><span style="color:#f92672">=</span>{<span style="color:#66d9ef">true</span>} <span style="color:#f92672">/&gt;</span>

<span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">visible</span> <span style="color:#f92672">/&gt;</span>
</code></pre></div><h4 id="强制-值为true的属性放在其它属性前面">
  [强制] 值为<code>true</code>的属性放在其它属性前面。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e5%80%bc%e4%b8%batrue%e7%9a%84%e5%b1%9e%e6%80%a7%e6%94%be%e5%9c%a8%e5%85%b6%e5%ae%83%e5%b1%9e%e6%80%a7%e5%89%8d%e9%9d%a2">#</a>
</h4>
<p>解释：</p>
<p>将<code>true</code>类的值放在前面使得组件的声明更接近自然语言，提高可读性。</p>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bad
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">data</span>} <span style="color:#a6e22e">visible</span> <span style="color:#a6e22e">requireValidation</span> <span style="color:#f92672">/&gt;</span>

<span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">visible</span> <span style="color:#a6e22e">requireValidation</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">data</span>} <span style="color:#f92672">/&gt;</span>
</code></pre></div><h4 id="强制-对于需要使用key的场合提供一个唯一标识作为key属性的值禁止使用可能会变化的属性如索引">
  [强制] 对于需要使用<code>key</code>的场合，提供一个唯一标识作为<code>key</code>属性的值，禁止使用可能会变化的属性（如索引）。
  <a class="anchor" href="#%e5%bc%ba%e5%88%b6-%e5%af%b9%e4%ba%8e%e9%9c%80%e8%a6%81%e4%bd%bf%e7%94%a8key%e7%9a%84%e5%9c%ba%e5%90%88%e6%8f%90%e4%be%9b%e4%b8%80%e4%b8%aa%e5%94%af%e4%b8%80%e6%a0%87%e8%af%86%e4%bd%9c%e4%b8%bakey%e5%b1%9e%e6%80%a7%e7%9a%84%e5%80%bc%e7%a6%81%e6%ad%a2%e4%bd%bf%e7%94%a8%e5%8f%af%e8%83%bd%e4%bc%9a%e5%8f%98%e5%8c%96%e7%9a%84%e5%b1%9e%e6%80%a7%e5%a6%82%e7%b4%a2%e5%bc%95">#</a>
</h4>
<p>解释：</p>
<p><code>key</code>属性是 React 在进行列表更新时的重要属性，如该属性会发生变化，渲染的性能和<strong>正确性</strong>都无法得到保证。</p>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bad
</span><span style="color:#75715e"></span>{
  <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span>, <span style="color:#a6e22e">index</span>) =&gt; <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">key</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">index</span>} {...<span style="color:#a6e22e">item</span>} <span style="color:#f92672">/&gt;</span>);
}

<span style="color:#75715e">// Good
</span><span style="color:#75715e"></span>{
  <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">item</span> =&gt; <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">key</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">id</span>} {...<span style="color:#a6e22e">item</span>} <span style="color:#f92672">/&gt;</span>);
}
</code></pre></div><h4 id="建议-避免在-jsx-的属性值中直接使用对象和函数表达式">
  [建议] 避免在 JSX 的属性值中直接使用对象和函数表达式。
  <a class="anchor" href="#%e5%bb%ba%e8%ae%ae-%e9%81%bf%e5%85%8d%e5%9c%a8-jsx-%e7%9a%84%e5%b1%9e%e6%80%a7%e5%80%bc%e4%b8%ad%e7%9b%b4%e6%8e%a5%e4%bd%bf%e7%94%a8%e5%af%b9%e8%b1%a1%e5%92%8c%e5%87%bd%e6%95%b0%e8%a1%a8%e8%be%be%e5%bc%8f">#</a>
</h4>
<p>解释：</p>
<p><code>PureComponent</code>使用<a href="https://github.com/facebook/fbjs/blob/master/packages/fbjs/src/core/shallowEqual.js"><code>shallowEqual</code></a>对<code>props</code>和<code>state</code>进行比较来决定是否需要渲染，而在 JSX 的属性值中使用对象、函数表达式会造成每一次的对象引用不同，从而<code>shallowEqual</code>会返回<code>false</code>，导致不必要的渲染。</p>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bad
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">WarnButton</span> {
  <span style="color:#a6e22e">alertMessage</span>(<span style="color:#a6e22e">message</span>) {
    <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">message</span>);
  }

  <span style="color:#a6e22e">render</span>() {
    <span style="color:#66d9ef">return</span> (
      <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">button</span>
        <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span>
        <span style="color:#a6e22e">onClick</span><span style="color:#f92672">=</span>{() =&gt; <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">alertMessage</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">message</span>)}
      <span style="color:#f92672">&gt;</span>
        <span style="color:#a6e22e">提示</span>
      <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/button&gt;</span>
    );
  }
}

<span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">WarnButton</span> {
  <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">bind</span>()
  <span style="color:#a6e22e">alertMessage</span>() {
    <span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">props</span>.<span style="color:#a6e22e">message</span>);
  }

  <span style="color:#a6e22e">render</span>() {
    <span style="color:#66d9ef">return</span> (
      <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;button&#34;</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">=</span>{<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">alertMessage</span>}<span style="color:#f92672">&gt;</span>
        <span style="color:#a6e22e">提示</span>
      <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/button&gt;</span>
    );
  }
}
</code></pre></div><h4 id="621-层级">
  6.2.1 层级
  <a class="anchor" href="#621-%e5%b1%82%e7%ba%a7">#</a>
</h4>
<h4 id="建议-将-jsx-的层级控制在-5-层以内">
  [建议] 将 JSX 的层级控制在 5 层以内。
  <a class="anchor" href="#%e5%bb%ba%e8%ae%ae-%e5%b0%86-jsx-%e7%9a%84%e5%b1%82%e7%ba%a7%e6%8e%a7%e5%88%b6%e5%9c%a8-5-%e5%b1%82%e4%bb%a5%e5%86%85">#</a>
</h4>
<p>解释：</p>
<p>JSX 提供了基于组件的便携的复用形式，因此可以通过将结构中的一部分封装为一个函数组件来很好地拆分大型复杂的结构。层次过深的结构会带来过多缩进、可读性下降等缺点。如同控制函数内代码行数和分支层级一样，对 JSX 的层级进行控制可以有效提升代码的可维护性。</p>
<p>示例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Bad
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">List</span> <span style="color:#f92672">=</span> ({ <span style="color:#a6e22e">items</span> }) =&gt; (
  <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">ul</span><span style="color:#f92672">&gt;</span>
    {<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">item</span> =&gt; (
      <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">li</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">header</span><span style="color:#f92672">&gt;</span>
          <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">h3</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">title</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/h3&gt;</span>
          <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">subtitle</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/header&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">section</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">content</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/section&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">footer</span><span style="color:#f92672">&gt;</span>
          <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">author</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;@&lt;time&gt;{item.postTime}&lt;/time&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/footer&gt;</span>
      <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/li&gt;</span>
    ))}
  <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/ul&gt;</span>
);

<span style="color:#75715e">// Good
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">Header</span> <span style="color:#f92672">=</span> ({ <span style="color:#a6e22e">title</span>, <span style="color:#a6e22e">subtitle</span> }) =&gt; (
  <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">header</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">h3</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">title</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/h3&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">subtitle</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;</span>
  <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/header&gt;</span>
);

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">Content</span> <span style="color:#f92672">=</span> ({ <span style="color:#a6e22e">content</span> }) =&gt; <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">section</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">content</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/section&gt;;</span>

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">Footer</span> <span style="color:#f92672">=</span> ({ <span style="color:#a6e22e">author</span>, <span style="color:#a6e22e">postTime</span> }) =&gt; (
  <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">footer</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">author</span>}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;@&lt;time&gt;{postTime}&lt;/time&gt;</span>
  <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/footer&gt;</span>
);

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">Item</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">item</span> =&gt; (
  <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Header</span> {...<span style="color:#a6e22e">item</span>} <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Content</span> {...<span style="color:#a6e22e">item</span>} <span style="color:#f92672">/&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Footer</span> {...<span style="color:#a6e22e">item</span>} <span style="color:#f92672">/&gt;</span>
  <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
);

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">List</span> <span style="color:#f92672">=</span> ({ <span style="color:#a6e22e">items</span> }) =&gt; <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">ul</span><span style="color:#f92672">&gt;</span>{<span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">Item</span>)}<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/ul&gt;;</span>
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/ikingye/study-javascript/commit/78eed233452ecd850a6bf705eb9ed88da6a6f21c" title='Last modified by yewang | 2020-08-04' target="_blank" rel="noopener">
      <img src="/study-javascript/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>2020-08-04</span>
    </a>
  </div>



</div>

 
        <div>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <p><span id="busuanzi_container_page_pv">本文阅读量 <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> 次</span></p>
    <p><span id="busuanzi_container_site_pv">本站总访问量 <span id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin"></i></span> 次</span></p>
    <p><span id="busuanzi_container_site_uv">本站总访客数 <span id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-spin"></i></span> 人次</span></p>
</div>

      </footer>

      
  
  <div class="book-comments">
<script src="https://utteranc.es/client.js"
  repo="ikingye/note"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>

<div id="footer">
  <p>
    <a href="https://kingye.me">叶王</a> &copy; 2013-2020
    版权所有。如果本文档对你有所帮助，可以<a
      href="https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200428110046.png"
      target="_blank"
      rel="noopener noreferrer"
      >请作者喝饮料</a
    >。
  </p>
</div>

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#1-版本限制">1 版本限制</a>
      <ul>
        <li><a href="#11-法律要求">1.1 法律要求</a>
          <ul>
            <li><a href="#强制-使用-react-1562版本">[强制] 使用 React <code>&gt;=15.6.2</code>版本</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#2-文件组织">2 文件组织</a>
      <ul>
        <li><a href="#21-命名">2.1 命名</a>
          <ul>
            <li><a href="#强制-同一目录下不得拥有同名的js和jsx文件">[强制] 同一目录下不得拥有同名的<code>.js</code>和<code>.jsx</code>文件。</a></li>
            <li><a href="#强制-组件文件使用一致的js或-jsx后缀">[强制] 组件文件使用一致的<code>.js</code>或 <code>.jsx</code>后缀。</a></li>
          </ul>
        </li>
        <li><a href="#22-模块化">2.2 模块化</a>
          <ul>
            <li><a href="#建议-实现单个组件的文件以export-default的形式暴露一个组件">[建议] 实现单个组件的文件以<code>export default</code>的形式暴露一个组件。</a></li>
            <li><a href="#建议-组织多个组件的目录使用一个indexjs以命名导出的形式暴露所有组件">[建议] 组织多个组件的目录使用一个<code>index.js</code>以命名导出的形式暴露所有组件。</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#3-命名规则">3 命名规则</a>
      <ul>
        <li><a href="#31-组件">3.1 组件</a>
          <ul>
            <li><a href="#强制-组件名为-pascalcase">[强制] 组件名为 PascalCase。</a></li>
            <li><a href="#强制-组件名称与文件名称保持相同">[强制] 组件名称与文件名称保持相同。</a></li>
          </ul>
        </li>
        <li><a href="#32-属性">3.2 属性</a>
          <ul>
            <li><a href="#强制-使用onxxx形式作为props中用于回调的属性名称">[强制] 使用<code>onXxx</code>形式作为<code>props</code>中用于回调的属性名称。</a></li>
            <li><a href="#建议-作为组件方法的事件处理函数以具备业务含义的词作为名称不使用onxxx形式命名">[建议] 作为组件方法的事件处理函数以具备业务含义的词作为名称，不使用<code>onXxx</code>形式命名。</a></li>
          </ul>
        </li>
        <li><a href="#33-高阶组件">3.3 高阶组件</a>
          <ul>
            <li><a href="#强制-高阶组件使用-camelcase-命名">[强制] 高阶组件使用 camelCase 命名。</a></li>
            <li><a href="#建议-使用withxxx或xxxable形式的词作为高阶组件的名称">[建议] 使用<code>withXxx</code>或<code>xxxable</code>形式的词作为高阶组件的名称。</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#4-组件声明">4 组件声明</a>
      <ul>
        <li><a href="#41-组件">4.1 组件</a>
          <ul>
            <li><a href="#强制-使用-es-class-声明组件禁止使用reactcreateclass">[强制] 使用 ES Class 声明组件，禁止使用<code>React.createClass</code>。</a></li>
            <li><a href="#强制-尽量使用无状态函数组件">[强制] 尽量使用无状态函数组件。</a></li>
            <li><a href="#建议-无需显式引入-react-对象">[建议] 无需显式引入 React 对象。</a></li>
            <li><a href="#建议-使用箭头函数声明函数组件">[建议] 使用箭头函数声明函数组件。</a></li>
          </ul>
        </li>
        <li><a href="#42-属性">4.2 属性</a>
          <ul>
            <li><a href="#强制-对于所有非isrequired的属性在defaultprops中声明对应的值">[强制] 对于所有非<code>isRequired</code>的属性，在<code>defaultProps</code>中声明对应的值。</a></li>
            <li><a href="#强制-如无必要使用属性语法声明propstypescontexttypesdefaultprops和state">[强制] 如无必要，使用属性语法声明<code>propsTypes</code>、<code>contextTypes</code>、<code>defaultProps</code>和<code>state</code>。</a></li>
          </ul>
        </li>
        <li><a href="#43-生命周期">4.3 生命周期</a>
          <ul>
            <li><a href="#强制-禁止使用componentwillmount">[强制] 禁止使用<code>componentWillMount</code>。</a></li>
            <li><a href="#强制-依照规定顺序编排组件中的方法和属性">[强制] 依照规定顺序编排组件中的方法和属性。</a></li>
          </ul>
        </li>
        <li><a href="#44-高阶组件">4.4 高阶组件</a>
          <ul>
            <li><a href="#建议-高阶组件返回新的组件类型时添加displayname属性">[建议] 高阶组件返回新的组件类型时，添加<code>displayName</code>属性。</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#5-组件实现">5 组件实现</a>
      <ul>
        <li><a href="#51-更新机制">5.1 更新机制</a>
          <ul>
            <li><a href="#强制-禁止为继承自purecomponent的组件编写shouldcomponentupdate实现">[强制] 禁止为继承自<code>PureComponent</code>的组件编写<code>shouldComponentUpdate</code>实现。</a></li>
          </ul>
        </li>
        <li><a href="#52-纯函数应用">5.2 纯函数应用</a>
          <ul>
            <li><a href="#强制-禁止在componentwillreceiveprops中包含除setstate外的副作用">[强制] 禁止在<code>componentWillReceiveProps</code>中包含除<code>setState</code>外的副作用。</a></li>
            <li><a href="#建议-除顶层或路由级组件以外所有组件均在概念上实现为纯组件pure-component">[建议] 除顶层或路由级组件以外，所有组件均在概念上实现为纯组件（Pure Component）。</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#6-jsx">6 JSX</a>
      <ul>
        <li><a href="#61-标签">6.1 标签</a>
          <ul>
            <li><a href="#强制-没有子节点的组件使用自闭合语法">[强制] 没有子节点的组件使用自闭合语法。</a></li>
            <li><a href="#强制-保持起始和结束标签在同一层缩进">[强制] 保持起始和结束标签在同一层缩进。</a></li>
            <li><a href="#强制-自闭合标签的前添加一个空格">[强制] 自闭合标签的<code>/&gt;</code>前添加一个空格。</a></li>
          </ul>
        </li>
        <li><a href="#62-属性">6.2 属性</a>
          <ul>
            <li><a href="#强制-对于多属性需要换行从第一个属性开始每个属性一行">[强制] 对于多属性需要换行，从第一个属性开始，每个属性一行。</a></li>
            <li><a href="#强制-以字符串字面量作为值的属性使用双引号在其它类型表达式中的字符串使用单引号">[强制] 以字符串字面量作为值的属性使用双引号（<code>&quot;</code>），在其它类型表达式中的字符串使用单引号（<code>'</code>）。</a></li>
            <li><a href="#强制-对于值为true的属性省去值部分">[强制] 对于值为<code>true</code>的属性，省去值部分。</a></li>
            <li><a href="#强制-值为true的属性放在其它属性前面">[强制] 值为<code>true</code>的属性放在其它属性前面。</a></li>
            <li><a href="#强制-对于需要使用key的场合提供一个唯一标识作为key属性的值禁止使用可能会变化的属性如索引">[强制] 对于需要使用<code>key</code>的场合，提供一个唯一标识作为<code>key</code>属性的值，禁止使用可能会变化的属性（如索引）。</a></li>
            <li><a href="#建议-避免在-jsx-的属性值中直接使用对象和函数表达式">[建议] 避免在 JSX 的属性值中直接使用对象和函数表达式。</a></li>
            <li><a href="#621-层级">6.2.1 层级</a></li>
            <li><a href="#建议-将-jsx-的层级控制在-5-层以内">[建议] 将 JSX 的层级控制在 5 层以内。</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
<a href="https://github.com/ikingye/note"
class="github-corner" aria-label="View source on GitHub">
<svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
  <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
  <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
  <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
</svg></a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

</body>

</html>












